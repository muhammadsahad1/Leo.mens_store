<%- include('../layouts/admin/header.ejs') -%>

<div class="screen-overlay"></div>
<aside class="navbar-aside" id="offcanvas_aside">
  <div class="aside-top">
    <a class="brand-wrap">
      <img style="width: 50px" class="ms-2" src="/img/logoleo.jpg" alt="" />
    </a>
    <div>
      <button class="btn btn-icon btn-aside-minimize">
        <i class="text-muted material-icons md-menu_open"></i>
      </button>
    </div>
  </div>

  <%- include('../partials/sidenav.ejs') %>
</aside>
<main class="main-wrap">
  <header class="main-header navbar">
    <div class="col-search">
  
    </div>
    <div class="col-nav">
      <a href="/admin/logout"
        ><i class="btn btn-dark ms-3 rounded-pill">Logout</i></a
      >
      <button
        class="btn btn-icon btn-mobile me-auto"
        data-trigger="#offcanvas_aside"
      >
        <i class="material-icons md-apps"></i>
      </button>
      <ul class="nav">
        <li class="dropdown nav-item">
          <a
            class="dropdown-toggle"
            data-bs-toggle="dropdown"
            href="#"
            id="dropdownAccount"
            aria-expanded="false"
          >
            <img
              class="img-xs rounded-circle"
              src="/imgs/people/avatar-2.png"
              alt="User"
          /></a>
          <div
            class="dropdown-menu dropdown-menu-end"
            aria-labelledby="dropdownAccount"
          >
            <div class="dropdown-divider"></div>
            <a class="dropdown-item text-danger" href=""
              ><i class="material-icons md-exit_to_app"></i>Logout</a
            >
          </div>
        </li>
      </ul>
    </div>
  </header>

  <section class="content-main">
    <div class="card mb-4">
      <header class="card-header">
        <div class="container-fluid">
          <div class="row align-items-center">
            <div class="col-lg-12">
              <h4 class="card-title">Latest Orders</h4>
            </div>
            <div>
              <form action="/admin/createReport" method="post" id="filterForm" >
                <div class="row align-items-center">
                  
                  
                  <label for="startDate" id="startDate" class="col-md-4 col-12">Start Date:</label>
                  <input
                  type="date"
                  required
                  id="startDate"
                  name="startDate"
                  class="col-md-8 col-12 form-control mb-2"/>
                </div>
                
                <div class="row align-items-center">
                  <label for="endDate" id="endDate" class="col-md-4 col-12">End Date:</label>
                  <input
                  type="date"
                  required
                  id="endDate"
                  name="endDate"
                  class="col-md-8 col-12 form-control mb-2"
                  />
                </div>
                <% if (messages.message) { %>
                  <div class="alert alert-danger"><%= messages.message %></div>
                 <% } %>
                
                <button type="submit" class="btn btn-primary">
                  Generate Report
                </button>
              </form>
            </div>
          </div>
        </div>
      </header>
    
  </section>

<!-- Include SweetAlert library -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<!-- Other scripts -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="/js/vendors/jquery-3.6.0.min.js"></script>
<script src="/js/vendors/bootstrap.bundle.min.js"></script>
<!-- ... other scripts ... -->

<!-- Script to parse query parameters and display the message -->
<script>
  // Function to parse query parameters
  function getQueryParam(name) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(name);
  }
 
  // Function to remove a query parameter
  function removeQueryParam(url, param) {
     const urlObj = new URL(url);
     urlObj.searchParams.delete(param);
     return urlObj.toString();
  }
  
  // Check if there's a message query parameter and display it
  const message = getQueryParam('message');
  if (message) {
      Swal.fire({
        icon: 'error',
        title: message,
        showConfirmButton: false,
        timer: 1500,
      }).then(() => {
        const newUrl = removeQueryParam(window.location.href, 'message');
        window.location.href = newUrl;
      });
  }
 </script>
<!-- Main Script -->
<script src="/js/main.js?v=1.1" type="text/javascript"></script>
<script src="/js/custom-chart.js" type="text/javascript"></script>
<!-- ... other scripts ... -->

  <!-- content-main end// -->
  <footer class="main-footer font-xs">
    <div class="row pb-30 pt-15">
      <div class="col-sm-6">
        <script>
          document.write(new Date().getFullYear());
        </script>
        &copy; Nest - HTML Ecommerce Template .
      </div>
      <div class="col-sm-6">
        <div class="text-sm-end">All rights reserved</div>
      </div>
    </div>
  </footer>
</main>

<!-- <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>


<script src="/js/vendors/jquery-3.6.0.min.js"></script>
<script src="/js/vendors/bootstrap.bundle.min.js"></script>
<script src="/js/vendors/select2.min.js"></script>
<script src="/js/vendors/perfect-scrollbar.js"></script>
<script src="/js/vendors/jquery.fullscreen.min.js"></script>
<script src="/js/vendors/chart.js"></script>
< Main Script -->
<!-- <script src="/js/main.js?v=1.1" type="text/javascript"></script>
<script src="/js/custom-chart.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
<script src="assets/js/main.js?v=1.1" type="text/javascript"></script
<script src="assets/js/custom-chart.js" type="text/javascript"></script> --> 

<%- include('../layouts/admin/footer.ejs') -%>
